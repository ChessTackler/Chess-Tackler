<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chess Game</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: #f0f0f0;
      margin: 0;
      padding: 1rem;
      font-family: sans-serif;
    }#moveHistory {
  width: 100%;
  max-width: 400px;
  background: white;
  padding: 0.5rem;
  margin-bottom: 1rem;
  border: 1px solid #ccc;
  overflow-x: auto;
  white-space: nowrap;
  font-size: 0.9rem;
}

#board {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  width: 90vmin;
  height: 90vmin;
  max-width: 90vmin;
  max-height: 90vmin;
  border: 2px solid #333;
  position: relative;
}

.square {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.light { background-color: #f0d9b5; }
.dark { background-color: #b58863; }

.highlight {
  background-color: rgba(255, 255, 0, 0.6);
}

.piece {
  width: 85%;
  height: 85%;
  object-fit: contain;
  transition: transform 0.2s ease;
}

  </style>
</head>
<body>
  <div id="moveHistory"></div>
  <div id="board"></div>  <script>
    const board = document.getElementById('board');
    const moveHistoryEl = document.getElementById('moveHistory');
    let boardState = [];
    let selected = null;
    let whiteTurn = true;
    let moveHistory = [];

    const initialPosition = [
      ['bR', 'bN', 'bB', 'bQ', 'bK', 'bB', 'bN', 'bR'],
      ['bP', 'bP', 'bP', 'bP', 'bP', 'bP', 'bP', 'bP'],
      ['', '', '', '', '', '', '', ''],
      ['', '', '', '', '', '', '', ''],
      ['', '', '', '', '', '', '', ''],
      ['', '', '', '', '', '', '', ''],
      ['wP', 'wP', 'wP', 'wP', 'wP', 'wP', 'wP', 'wP'],
      ['wR', 'wN', 'wB', 'wQ', 'wK', 'wB', 'wN', 'wR']
    ];

    function setupBoard() {
      board.innerHTML = '';
      boardState = JSON.parse(JSON.stringify(initialPosition));
      for (let row = 0; row < 8; row++) {
        for (let col = 0; col < 8; col++) {
          const square = document.createElement('div');
          square.classList.add('square');
          square.classList.add((row + col) % 2 === 0 ? 'light' : 'dark');
          square.dataset.row = row;
          square.dataset.col = col;
          board.appendChild(square);
        }
      }
      renderPieces();
    }

    function renderPieces() {
      document.querySelectorAll('.square').forEach(square => square.innerHTML = '');
      for (let row = 0; row < 8; row++) {
        for (let col = 0; col < 8; col++) {
          const piece = boardState[row][col];
          if (piece) {
            const img = document.createElement('img');
            img.src = `${piece}.png`;
            img.classList.add('piece');
            const square = document.querySelector(`.square[data-row='${row}'][data-col='${col}']`);
            square.appendChild(img);
          }
        }
      }
    }

    function isOpponent(piece1, piece2) {
      return piece1 && piece2 && piece1[0] !== piece2[0];
    }

    function algebraic(row, col) {
      return String.fromCharCode(97 + col) + (8 - row);
    }

    function recordMove(fromRow, fromCol, toRow, toCol) {
      const move = `${algebraic(fromRow, fromCol)}${algebraic(toRow, toCol)}`;
      const turn = Math.floor(moveHistory.length / 2) + 1;
      if (whiteTurn) {
        moveHistory.push(`${turn}. ${move}`);
      } else {
        moveHistory[moveHistory.length - 1] += ` ${move}`;
      }
      moveHistoryEl.textContent = moveHistory.join(' ');
      moveHistoryEl.scrollLeft = moveHistoryEl.scrollWidth;
    }

    function handleClick(e) {
      const row = parseInt(e.currentTarget.dataset.row);
      const col = parseInt(e.currentTarget.dataset.col);
      const clickedPiece = boardState[row][col];

      if (selected) {
        const [fromRow, fromCol] = selected;
        if ((row !== fromRow || col !== fromCol)) {
          const legal = true; // Add real logic later
          if (legal) {
            recordMove(fromRow, fromCol, row, col);
            boardState[row][col] = boardState[fromRow][fromCol];
            boardState[fromRow][fromCol] = '';
            selected = null;
            whiteTurn = !whiteTurn;
            renderPieces();
            return;
          }
        }
        selected = null;
        renderPieces();
      } else if (clickedPiece && ((whiteTurn && clickedPiece[0] === 'w') || (!whiteTurn && clickedPiece[0] === 'b'))) {
        selected = [row, col];
      }
    }

    function addClickHandlers() {
      document.querySelectorAll('.square').forEach(square => {
        square.addEventListener('click', handleClick);
      });
    }

    setupBoard();
    addClickHandlers();
  </script></body>
</html>